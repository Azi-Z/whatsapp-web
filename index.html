

<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="task10.css">
 

    <style>
        body {background-image: url("http://wutsapp.net/images/dist/bg.png");
    /*color: white;*/}
</style>

<script type="text/javascript">
    function lala() {
			var x = document.getElementById('hide'); // function to hide the conversation body uptil submit is clicked 
			if (x.style.display === 'none') {
				x.style.display = 'block';
			} else {
				x.style.display = 'none';
			}

			var obj, dbParam, xmlhttp, newdate = 0 ;
			obj = { "table":"wtapp"};

			dbParam = JSON.stringify(obj);

			xmlhttp = new XMLHttpRequest();
			xmlhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {
					var dat = JSON.parse(this.responseText);

			//console.log(dat[i]) ->by putting [i] only it wil display with data or it will only display obejects properties  
			for (var i =0; i < dat.length; i++) {


				if (dat[i] != "") {

			//console.log(dat[i].date) -> we are calling date by giving "."  because its an object 
			if(newdate != dat[i].date){
				var d1 = document.getElementById('conversation');
				d1.insertAdjacentHTML('beforeend', "<span class='dd'>"+dat[i].date+"</span>");

				newdate =  dat[i].date; 

			}
			// insert adjacenthtml is added to load after the datas collected
			if (dat[i].name.trim() == "Azi Simma") { 
				var d2 = document.getElementById('conversation');
				d2.insertAdjacentHTML('beforeend', "<div  class='ballon you' style = 'padding: 8px;  position: relative; color: #000;        font-size: 14px; line-height:18px; box-shadow: 0 0 1px rgba(0, 0, 0, 0.2); clear: both; margin: 8px 0; max-width: 85%; background: #e1ffc7;float: right; border-radius: 5px 0px 5px 5px; '><div  class='mm'>"+dat[i].msg+"</div><span class='data' style = 'display: inline-block; padding: 0 20px 0 16px;font-size: 11px; color: #b9b9b9; position: relative;bottom: -5px; float: right;background-repeat: no-repeat;background-position: right 3px;background-color: transparent;background-size: 16px auto;'>"+dat[i].time+"</span></div>");
				
			}
			else
			{
				var d3 = document.getElementById('conversation');
				d3.insertAdjacentHTML('beforeend', "<div  class='ballon him' style = 'padding: 8px;  position: relative; color: #000;        font-size: 14px; line-height:18px; box-shadow: 0 0 1px rgba(0, 0, 0, 0.2); clear: both; margin: 8px 0; max-width: 85%; background: #e1ffc7;float: left; border-radius: 5px 0px 5px 5px; '><div  class='mm'>"+dat[i].msg+"</div><span class='data' style = 'display: inline-block; padding: 0 20px 0 16px;font-size: 11px; color: #b9b9b9; position: relative;bottom: -5px; float: right;background-repeat: no-repeat;background-position: right 3px;background-color: transparent;background-size: 16px auto;'>"+dat[i].time+"</span></div>");            
			}       
			}
			}
			}

			};  // you have to give ip address along with file path to load the php from sys wen connected in same wifi
			xmlhttp.open("GET", "http://192.168.0.115/intern/cordovaapps/hello/www/task10.php?x=" + dbParam, true);
			xmlhttp.send(); 

			}


 </script>

</head>


<body>
    <center style="color:white;">
        <h3> App checking </h3>
        <hr>
     
        <br><br>
        <input type="button" onclick="lala()" name="submit" value="Submit" style="border-radius: 9px;" id="upload">
    </center>

<!-- CONVERSATION WINDOW STARTS -->
<div id="hide" style="display: none";>
    <center>
        <div class="phone">
            <div class="wa-container">
                <div class="status-bar">
                    <div class="time">
                      2:15 PM
                  </div>
              </div>
              <div class="wrapperchat">
                <div class="chat-root">
                  <div class="user-bar">
                    <div class="back">
                      <i class="zmdi zmdi-arrow-left"></i>
                  </div>
                  <!-- user info start -->
                  <div class="user">
                      <img src="https://s3.amazonaws.com/uifaces/faces/twitter/_everaldo/128.jpg" alt="user" />
                  </div>
                  <div class="user-name">
                      <b>Azi Simma</b>
                      <span>online now</span>
                  </div>

                  <!-- SEARCH FUNCTION FIELD-->
                  <div class-"search-icon" style=" position: relative; float: right; left: 50px;">
                    <input type="text" id="searchbox" size="10" name="display"  style=" margin-bottom: 5%;" />   
                    <!--  Search function -->
                    <script type="text/javascript">

                   // <!-- SEARCH FUNCTION, WE USE EVENTLISTENER SO THAT IT WILL LOAD APPROPRIATELY -->
                        document.getElementById("searchbox").addEventListener("keyup", function(){

                            var input = document.getElementById("searchbox");
                                          //getting input

                                          var filter = input.value.toUpperCase(); 

                                               //changing the input into uppercase for easy search

                                               var nodes = document.getElementsByClassName("mm"); 
                                              //this class is msg alone 
                                              
                                              var bb = document.getElementsByClassName("ballon"); 
                                              // this class is msg alone with style properties

                                                for (i=0; i < nodes.length; i++)    // condition to assign and check node length or getting the count
                                                {

                                                      if (nodes[i].innerHTML.toUpperCase().includes(filter)){  //its getting msg
                                                        bb[i].style.display = "block";  //  its getting properties 
                                                        
                                                    }
                                                    else {
                                                        bb[i].style.display = "none";
                                                    }
                                                }

                                            });




                                        </script>


                                        <img src="698956-icon-111-search-128.png" width="12%"  style=" position: relative; top: 12px;" /> 

                                        <!-- <button type="submit" >Save</button>  --> <!-- calling the form to send into database with tat form name -->

                                    </div>   
                                    <!-- Search bar end -->
                                    <!-- user info end -->
                                    <div class="actions more">
                                      <i class="zmdi zmdi-more-vert"></i>
                                  </div>
                                  <div class="actions attachment">
                                      <i class="zmdi zmdi-attachment-alt"></i>
                                  </div>
                                  <div class="actions">
                                      <i class="zmdi zmdi-phone"></i>
                                  </div>
                              </div>
                              <div class="chat-window" style="height: 100%">
                                <!-- conversation start -->
                                <div class="conversation" id="conversation">



                                </div> 
                            </div> 
                        </div> 
                    </div> 
                </center>
            </div>

        </body>

        </html>




